(()=>{"use strict";const e=window.React,i=window.wp.htmlEntities,n=document.createElement("script");n.src="https://cdn.wegetfinancing.com/libs/1.0/getfinancing.js",document.head.appendChild(n);let t=null,s=null;const{registerPaymentMethod:l}=window.wc.wcBlocksRegistry,{getSetting:a}=window.wc.wcSettings,o=a("wegetfinancing_data",{}),c=o.title,p=o.description,d=e=>{const n=e.billing,l=e.shippingData;return t=n,s=l,(0,i.decodeEntities)(p)},r=()=>(0,e.createElement)("img",{src:o.checkout_button_image_url,style:{float:"right",marginRight:"20px"},alt:o.checkout_button_alt});l({name:o.payment_method_id,label:(0,e.createElement)((()=>(0,e.createElement)("span",{style:{width:"100%"}},c,(0,e.createElement)(r,null))),null),content:(0,e.createElement)(d,null),edit:(0,e.createElement)(d,null),canMakePayment:()=>!0,ariaLabel:c,placeOrderButtonLabel:"TEST"});const g=document.createElement("a");g.id="wgf_checkout_button",g.className="wgf_checkout_button",g.href="#wgf_checkout",g.style.display="none",g.onclick=()=>{m()};const _=document.createElement("img");_.src=o.checkout_button_image_url,_.alt=o.checkout_button_alt,_.style.maxWidth="320px",_.className="wc-block-components-checkout-place-order-button",g.append(_),document.addEventListener("input",(e=>{const i=document.querySelector(".wc-block-components-checkout-place-order-button");i.closest("div").append(g);const n=document.querySelector("#wgf_checkout_button");if("radio-control-wc-payment-method-options"===e.target.getAttribute("name")){const t=e.target.value===o.payment_method_id;i.style.display=t?"none":"block",n.style.display=t?"block":"none"}}));const h={billing_first_name:"billing-first_name",billing_last_name:"billing-last_name",billing_country:"billing-country",billing_address_1:"billing-address_1",billing_address_2:"billing-address_2",billing_city:"billing-city",billing_state:"billing-state",billing_postcode:"billing-postcode",billing_phone:"billing-phone",billing_email:"email",shipping_first_name:"shipping-first_name",shipping_last_name:"shipping-last_name",shipping_country:"shipping-country",shipping_address_1:"shipping-address_1",shipping_address_2:"shipping-address_2",shipping_city:"shipping-city",shipping_state:"shipping-state",shipping_postcode:"shipping-postcode",shipping_phone:"shipping-phone"},m=()=>{let e={};e[o.billing_first_name]=t.billingData.first_name,e[o.billing_last_name]=t.billingData.last_name,e[o.billing_country]=t.billingData.country,e[o.billing_address_1]=t.billingData.address_1,e[o.billing_address_2]=t.billingData.address_2,e[o.billing_city]=t.billingData.city,e[o.billing_state]=t.billingData.state,e[o.billing_postcode]=t.billingData.postcode,e[o.billing_phone]=t.billingData.phone,e[o.billing_email]=t.billingData.email,e[o["ship-to-different-address-checkbox"]]=!1,e[o.shipping_first_name]=s.shippingAddress.first_name,e[o.shipping_last_name]=s.shippingAddress.last_name,e[o.shipping_country]=s.shippingAddress.country,e[o.shipping_address_1]=s.shippingAddress.address_1,e[o.shipping_address_2]=s.shippingAddress.address_2,e[o.shipping_city]=s.shippingAddress.city,e[o.shipping_state]=s.shippingAddress.state,e[o.shipping_postcode]=s.shippingAddress.postcode,e[o.shipping_phone]=s.shippingAddress.phone;let i=new FormData;i.append("action",o.ajax_action),i.append("_wpnonce",o.nonce);for(let n in e)i.append(`data[${n}]`,e[n]);fetch(o.ajax_url,{method:"POST",body:i}).then((e=>e.json())).then((e=>{console.log(e),"isSuccess"in e&&(!1===e.isSuccess?b(e):y(e))})).catch((e=>console.log(e)))},b=e=>{if("violations"in e){const n=e.violations;for(let e in n){let t=n[e];if("fields"in t&&"messages"in t)for(let e in t.fields){var i;let n=t.fields[e],s=t.messages[e],l=null!==(i=h[n])&&void 0!==i?i:e,a=document.getElementById(l);if(a){let e=a.closest("div"),i=e.querySelector(".wc-block-components-validation-error");if(!i){let n=u();e.append(n),i=e.querySelector(".wc-block-components-validation-error")}i.innerHTML=`<p>${s}</p>`,e.classList.add("has-error")}}}}},u=()=>{let e=document.createElement("div");return e.className="wc-block-components-validation-error",e},y=e=>{GetFinancing&&new GetFinancing(e.href,function(){document.querySelector(".wc-block-components-checkout-place-order-button").click()}.bind(self),(function(){}))}})();